<head>
    <script src="{{url_for('static', filename='BG_Anxiety.js')}}"></script>
    <script src="{{url_for('static', filename='async.js')}}"></script>
    <script src="{{url_for('static', filename='main.js')}}"></script>
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='switch.css')}}">
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.5.0.min.js"></script>
    <title>Data Analysis</title>
    <link rel='shortcut icon' href="{{url_for('static', filename='favicon.ico')}}" type='image/x-icon'/ >
    <style id="StoredStyle">
        #IfStored {
            display: none;
        }
    </style>
</head>
<canvas id="game_canvas"></canvas>
<body onload="onload();">
    <div id="topRight">
        <p class="unselectable" style="margin-bottom: 1px; margin-top: 5px;">Theme:</p>
        <div class="together">
            <p class="unselectable">Dark â€‚</p>
            <label class="switch" id="ThemeSwitch">
                <input id="themeSwitch" type="checkbox" onclick="changeTheme(this.checked);">
                <span class="slider round"></span>
            </label>
            <p class="unselectable"> â€‚Light</p>
        </div>
    </div>
    <div id="centreSection">
        <p id="progress">NOT STARTED</p>
        <p id="progressStatus"></p>
        <p id="progressState">PRESS THE BUTTON BELOW TO START</p>
        <button onclick="start_long_task();">Start!</button>
        <form action="{{ url_for('get_files')}}" method="post">
            <fieldset>
                <legend>Cache settings</legend>
                <label for="checkbox" class="form-label">NOTE: It will still use already cached files unless you use force refresh. The Cache option is for if you download something; should it be cached.</label><br>
                <input type="checkbox" id="Cache" name="Cache" oninput="updateCacheStatus();">Cache?</input><br>
                <input type="checkbox" id="Force" name="Force" oninput="updateCacheStatus();">Force refresh cache?</input><br>
                <p id="CacheStatus"></p>
                <button type="button" onclick="updateCacheStatus();">Refresh Cache Status</button>
                <label for="button" class="form-label">Delete Cache</label>
                <input type="button" onclick="DeleteCache();" value="ðŸ—‘"><br>
            </fieldset>
            <fieldset>
                <legend>Files</legend>
                <p id="FilesInfo"><b>Status: </b>FILES NOT STORED</p>
                <textarea disabled id="FilesStatus" style="resize: none;" cols='60' rows='3'></textarea><br>
                <button type="submit" class="btn btn-primary">Get files</button>
            </fieldset>
        </form>
        <div id="IfStored">
            <br>
            <form>
                <label for="select" class="form-label">Pick a graph to show</label>
                <input
                    name="location"
                    id="graphSelect"
                    list="GraphOpts"
                    class="disableAutoComplete"
                    oninput="checkGraphInp()"
                    style="width: 500px;"
                />
                <datalist id="GraphOpts"></datalist>
                <input type="button" onclick="graph(document.getElementById('graphSelect').value);" value="SHOW!" id="GraphConfirm" disabled>
            </form>
            <br>
            <!--img src='data:image/png;base64,{{data}}' onerror="this.style.display='none'"/-->
        </div>
        <div id="Graphs">
            <div id="myplot"></div>
            <div id="LocationsPlot"></div>
        </div>
    </div>
    <script type=text/javascript>
        if ({{ files }}) {
            document.getElementById("FilesInfo").innerHTML = "<b>Status: </b>FILE STORAGE IN PROGRESS";
            file_status_check();
        }
    </script>
</body>